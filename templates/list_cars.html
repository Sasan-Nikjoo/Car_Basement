{% extends 'base.html' %}

{% block head %}
    <title>Car List</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/cards.css') }}">
{% endblock %}

{% block body %}
    <h1>Car List</h1>
    <form action="{{ url_for('list_cars') }}" method="GET" class="search-form">
    <input type="text" name="search" placeholder="Search by car name" value="{{ search_query }}" required>

    <select name="company_id" onchange="this.form.submit()">
        <option value="">All Companies</option>
        {% for company in companies %}
        <option value="{{ company[0] }}" {% if selected_company_id == company[0] %}selected{% endif %}>{{ company[1] }}</option>
        {% endfor %}
    </select>

    <button type="submit">Search</button>
</form>


    <div class="card-container">
        {% for car in cars %}
        <a href="{{ url_for('car_detail', id=car[0]) }}" class="card-link">
            <div class="card">
                <h2>{{ car[1] }}</h2>
                <p><strong>Color:</strong> {{ car[2] }}</p>
                <p><strong>Airbags:</strong> {{ car[3] }}</p>
                <p><strong>Sunroof:</strong> {{ 'Yes' if car[4] else 'No' }}</p>
                {% if car[6] %}
                <img src="{{ car[6] }}" alt="{{ car[1] }}">
                {% endif %}
                <form action="{{ url_for('delete_car', id=car[0]) }}" method="POST" style="display:inline;">
                    <button type="submit" onclick="return confirm('Are you sure you want to delete this car?');">Delete</button>
                </form>
            </div>
        </a>
        {% endfor %}
    </div>
    <br>
    <a href="{{ url_for('add_car') }}">Add Another Car</a>
{% endblock %}
